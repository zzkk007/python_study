"---------------------------------------------------------------"


						微信公众号

"---------------------------------------------------------------"

						厘清概念

1、本课程的目的：

	掌握微信公众号开发的原理

	熟悉微信公众号的基本功能开发

	锻炼阅读文档，对接第三方接口开发的能力


2、先来看看马化腾家又为我们的汉语创造了哪些新词汇：

	公众号
	公众平台
	订阅号
	服务号
	微信认证

	2.1 公众号和公众平台：

		微信账号类型:

			个人号
		
			公众号
				订阅号
				服务号
			
			企业号
	
		公众号：

			微信公众号主要面向名人、政府、媒体、企业等机构推出的合作推广业务。
			在这里可以通过微信渠道将品牌推广给上亿的微信用户，减少宣传成本，提高品牌知名度，
			打造更具影响力的品牌形象。

		公众平台：

			微信公众平台是运营者通过公众号为微信用户提供资讯和服务的平台，
			而公众平台开发接口则是提供服务的基础，开发者在公众平台网站中创建公众号、
			获取接口权限后，可以通过阅读公众平台开发接口文档来帮助开发。

			微信公众平台可以用来注册、管理公众号和企业号。


		公众号与个人号的区别:	

			微信公众号和个人号是完全不同的。

			微信对个人号的定位是普通用户之间的交流和通讯，微信并不鼓励和支持使用个人号进行营销推广
			(微信曾经大规模封杀好友过多的营销个人号）。
					
			而公众号则完全是为品牌推广、信息推送等服务而定制的。
			使用公众号，可以向关注者（即粉丝)群发图文消息，粉丝在对话界面看到消息后，
			可以点击跳转到一个图文页面。公众号还提供关键词自动回复等基础功能，
			以此可以随时、自动的和粉丝进行互动。

			除了这些基础功能之外，更大的区别是，微信针对公众号开放了很多程序接口。
			在这些接口的基础上，可以向粉丝提供更多的服务。此外，认证的服务号还可以申请微信支付。
			粉丝可以使用微信支付向进行付款（订购服务或购买商品）。所有这些，都是个人号不具备的。

			微信公众号的注册几乎是没有门槛的。
			不过针对不同类型的公众号，微信提供的功能不同，资质要求也不一样
		
	2.2 订阅号与服务号:

		公众号类型

			订阅号
				普通订阅号
				认证订阅号
		
			服务号
				普通服务号
				认证订阅号
		
		订阅号：

			主要偏向于为用户传达资讯，（功能类似报纸杂志，为用户提供新闻信息或娱乐趣事），每天可群发1条消息；

			适用人群：个人、媒体、企业、政府或其他组织。


		服务号:

			主要偏向于服务交互（功能类似12315，114，银行，提供绑定信息，服务交互），每月可群发4条消息；

			适用人群：媒体、企业、政府或其他组织。

		微信认证:

			微信认证是微信公众平台为了确保公众帐号的信息的真实性、安全性，
			目前提供给微信公众服务号进行微信认证的服务。

			微信认证后，获得更丰富的高级接口，向用户提供更有价值的个性化服务。
			微信认证后，用户将在微信中看到微信认证特有的标识
			（公众帐号资料中“认证详情”中会展示认证资料、以及微信认证特有的标识，暂不支持取消）。

"---------------------------------------------------------------"

						微信开发原理

	1、被动回复，粉丝发消息，公众号回复消息。

	2、主动告知，公众号主动给粉丝发消息，例如文字、语音、图文。

	3、内嵌网页，利用内嵌网页链接跳转到网页的形式，向粉丝展示信息内容，或者实现复杂的交互业务逻辑。

	4、明确需求：

		公众号主要通过

			公众号消息会话
			公众号内网页

		来为用户提供服务的。

		公众号消息会话：
			公众号是以微信用户的一个联系人形式存在的，消息会话是公众号与用户交互的基础。

		公众号内网页:
			许多复杂的业务场景，需要通过网页形式来提供服务。

	
	5、公众平台预定义功能：
		
		被动回复——接收粉丝消息并回复

		主动告知——主动给粉丝发消息

		内嵌网页——嵌入网页链接，跳转到网页展现


	6、不给力，满足不了:

		设想两个场景：

		公众号的消息自动回复想做的智能一些，类似于iphone的Siri，
		例如粉丝发送“今天的北京天气”到公众号，回复粉丝信息时要按照特定时间特定城市给予反馈;

		公众号内嵌的网页需要获取浏览用户的微信头像、昵称、当前定位等信息。

		以上两个场景，均无法在公众平台的预定义功能设置中通过配置完成。

		怎么办？


	7 、无扩展应用模型:

		公众号消息会话：

						发送消息
			微信客户端 -----------> 微信服务器
					   <----------- 
				    	回复消息

		公众号内网页:

						发送请求
			微信客户端  -----------> 网页服务器
						<-----------
						返回网页


	8、有扩展应用模型：

		公众号消息会话：

						发送消息            转发消息
			微信客户端 --------> 微信服务器 ----------> 开发者服务器
					   <--------            <----------
						回复消息             返回响应消息

		公众号内网页：

						发送消息             寻求用户信息
			微信客户端 --------> 网页服务器 ----------> 微信服务器
					   <--------            <----------
						返回网页             返回用户信息

	9、公众号接口：

		公众号消息会话：

			目前公众号内主要有这样几类消息服务的类型，分别用于不同的场景。

			群发消息：

				公众号可以以一定频次（订阅号为每天1次，服务号为每月4次），向用户群发消息，
				包括文字消息、图文消息、图片、视频、语音等。
			
			被动回复消息：

				在用户给公众号发消息后，微信服务器会将消息发到开发者预先在开发者中心设置的服务器地址
				（开发者需要进行消息真实性验证），公众号可以在5秒内做出回复，可以回复一个消息，
				也可以回复命令告诉微信服务器这条消息暂不回复。
				被动回复消息可以设置加密（在公众平台官网的开发者中心处设置，
				设置后，按照消息加解密文档来进行处理。
				其他3种消息的调用因为是API调用而不是对请求的返回，所以不需要加解密）。

			客服消息：

				在用户给公众号发消息后的48小时内，公众号可以给用户发送不限数量的消息，
				主要用于客服场景。用户的行为会触发事件推送，某些事件推送是支持公众号据此发送客服消息的，
				详见微信推送消息与事件说明文档。

			模板消息

				在需要对用户发送服务通知（如刷卡提醒、服务预约成功通知等）时，
				公众号可以用特定内容模板，主动向用户发送消息。	

		公众号内网页：

			对于公众号内网页，提供以下场景接口：
			
				网页授权获取用户基本信息
					
					通过该接口，可以获取用户的基本信息

				微信JS-SDK

					是开发者在网页上通过JavaScript代码使用微信原生功能的工具包，
					开发者可以使用它在网页上录制和播放微信语音、监听微信分享、
					上传手机本地图片、拍照等许多能力。

		微信开发者文档：

			微信开发者文档网址 https://mp.weixin.qq.com/wiki/home/index.html


"----------------------------------------------------------------"


						接入微信公众平台

"----------------------------------------------------------------"


						公众号接收和发送消息
	
"----------------------------------------------------------------"


						微信网页授权						

"----------------------------------------------------------------"

						自定义菜单

"----------------------------------------------------------------"
